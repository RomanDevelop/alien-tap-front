# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ –≤ BotFather –¥–ª—è Telegram WebApp

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ–ª–µ `user` –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ Telegram WebApp `initDataUnsafe`, —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É "Invalid telegram signature".

## ‚úÖ –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ BotFather

### 1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ WebApp URL**

1. –û—Ç–∫—Ä–æ–π—Ç–µ —á–∞—Ç —Å [@BotFather](https://t.me/BotFather)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/mybots`
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ (`alien_game_bot`)
4. –í—ã–±–µ—Ä–∏—Ç–µ **"Bot Settings"** ‚Üí **"Menu Button"** –∏–ª–∏ **"Web App"**
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ WebApp URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
   ```
   https://your-frontend-url.ngrok-free.dev
   ```
   –∏–ª–∏
   ```
   https://your-frontend-url.vercel.app
   ```

### 2. **–í–∞–∂–Ω–æ: WebApp –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω —á–µ—Ä–µ–∑ Menu Button**

Telegram WebApp –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`user`) —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏:

- WebApp –∑–∞–ø—É—â–µ–Ω —á–µ—Ä–µ–∑ **Menu Button** (–∫–Ω–æ–ø–∫–∞ –º–µ–Ω—é –±–æ—Ç–∞)
- –ò–ª–∏ —á–µ—Ä–µ–∑ **Inline Keyboard Button** —Å —Ç–∏–ø–æ–º `web_app`

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

1. –í BotFather: `/mybots` ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞ ‚Üí **"Bot Settings"** ‚Üí **"Menu Button"**
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Menu Button –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –≤–∞—à WebApp URL

### 3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ WebApp –∑–∞–ø—É—â–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ**

–î–∞–Ω–Ω—ã–µ `user` –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏:

- ‚úÖ WebApp –æ—Ç–∫—Ä—ã—Ç —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é –±–æ—Ç–∞
- ‚úÖ WebApp –æ—Ç–∫—Ä—ã—Ç —á–µ—Ä–µ–∑ Inline Keyboard —Å `web_app` –∫–Ω–æ–ø–∫–æ–π
- ‚ùå –ù–ï –¥–æ—Å—Ç—É–ø–Ω—ã –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç –Ω–∞–ø—Ä—è–º—É—é –ø–æ URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### 4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞**

1. –í BotFather: `/mybots` ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞ ‚Üí **"API Token"**
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞ –±—ç–∫–µ–Ω–¥–µ
3. –¢–æ–∫–µ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `TELEGRAM_BOT_TOKEN`

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

–û—Ç–∫—Ä–æ–π—Ç–µ WebApp —á–µ—Ä–µ–∑ Telegram –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏:

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –º—ã –≤ Telegram
console.log("Telegram.WebApp:", window.Telegram?.WebApp);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ initDataUnsafe
console.log("initDataUnsafe:", window.Telegram?.WebApp?.initDataUnsafe);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ user
console.log("user:", window.Telegram?.WebApp?.initDataUnsafe?.user);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ hash
console.log("hash:", window.Telegram?.WebApp?.initDataUnsafe?.hash);
```

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

```javascript
initDataUnsafe: {
  user: {
    id: 123456789,
    username: "username",
    first_name: "First",
    last_name: "Last"
  },
  auth_date: 1234567890,
  hash: "abc123..."
}
```

### –ï—Å–ª–∏ `user` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:

1. **WebApp –æ—Ç–∫—Ä—ã—Ç –Ω–µ —á–µ—Ä–µ–∑ Telegram** - –æ—Ç–∫—Ä–æ–π—Ç–µ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é –±–æ—Ç–∞
2. **Menu Button –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω** - –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –≤ BotFather
3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤ BotFather

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ BotFather

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Menu Button

```
1. –û—Ç–∫—Ä–æ–π—Ç–µ @BotFather
2. /mybots
3. –í—ã–±–µ—Ä–∏—Ç–µ alien_game_bot
4. Bot Settings ‚Üí Menu Button
5. –í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏: "üéÆ –ò–≥—Ä–∞—Ç—å"
6. –í–≤–µ–¥–∏—Ç–µ URL: https://your-frontend-url.ngrok-free.dev
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ WebApp —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é (—Ç—Ä–∏ –ª–∏–Ω–∏–∏ –≤–Ω–∏–∑—É)
3. –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ "üéÆ –ò–≥—Ä–∞—Ç—å"
4. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ—ë - –æ—Ç–∫—Ä–æ–µ—Ç—Å—è WebApp
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–∞–Ω–Ω—ã–µ `user`

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **WebApp URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å HTTPS** - Telegram —Ç—Ä–µ–±—É–µ—Ç HTTPS
2. **WebApp –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –∏–ª–∏ Vercel
3. **–î–∞–Ω–Ω—ã–µ `user` –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ Telegram** - –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –≤ –æ–±—ã—á–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ
4. **Menu Button –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω** - –±–µ–∑ –Ω–µ–≥–æ –¥–∞–Ω–Ω—ã–µ `user` –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã

## üîß –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: Inline Keyboard

–ï—Å–ª–∏ Menu Button –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Inline Keyboard:

```javascript
// –í –±–æ—Ç–µ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π:
{
  reply_markup: {
    inline_keyboard: [
      [
        {
          text: "üéÆ –ò–≥—Ä–∞—Ç—å",
          web_app: { url: "https://your-frontend-url.ngrok-free.dev" },
        },
      ],
    ];
  }
}
```

## üìù –ß–µ–∫–ª–∏—Å—Ç

- [ ] Menu Button –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ BotFather
- [ ] WebApp URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (HTTPS)
- [ ] WebApp –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- [ ] WebApp –æ—Ç–∫—Ä—ã—Ç —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é –±–æ—Ç–∞ (–Ω–µ –Ω–∞–ø—Ä—è–º—É—é)
- [ ] –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –≤–∏–¥–Ω–æ `initDataUnsafe.user`
- [ ] –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –Ω–∞ –±—ç–∫–µ–Ω–¥–µ

---

**–ï—Å–ª–∏ –ø–æ—Å–ª–µ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ `user` –≤—Å–µ –µ—â–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏ –ø–æ–ª—É—á–µ–Ω–∏—è user)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ WebApp –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∑–∞–ø—É—â–µ–Ω –≤–Ω—É—Ç—Ä–∏ Telegram (–Ω–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ)
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é `telegram-web-app.js`
